<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Wallpapers</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9fafb; margin: 0; padding: 20px; }
    h1 { text-align: center; margin-bottom: 20px; }
    .container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .controls, .preview { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; font-weight: bold; }
    select, input, textarea, button { width: 100%; margin-top: 5px; padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
    .preview img { width: 100%; border-radius: 10px; }
    .history { margin-top: 20px; }
    .history img { width: 100px; margin: 5px; border-radius: 5px; cursor: pointer; }
    .share-buttons button { margin: 5px; }
  </style>
</head>
<body>

<h1>🎨 Gerador de Wallpapers com IA</h1>

<div class="container">
  <div class="controls">
    <label>Estilo</label>
    <select id="estilo">
      <option value="realista">Realista</option>
      <option value="cartoon">Cartoon</option>
      <option value="futurista">Futurista</option>
      <option value="surreal">Surreal</option>
    </select>

    <label>Tema Principal</label>
    <input type="text" id="tema" placeholder="Ex.: Floresta mágica">

    <label>Elementos Secundários</label>
    <input type="text" id="elementos" placeholder="Ex.: pássaros, rios">

    <label>Paleta de Cores</label>
    <input type="text" id="cores" placeholder="Ex.: tons pastel">

    <label>Tom Emocional</label>
    <select id="tom">
      <option value="alegre">Alegre</option>
      <option value="sombrio">Sombrio</option>
      <option value="sereno">Sereno</option>
      <option value="dramático">Dramático</option>
    </select>

    <label>Cor de Fundo</label>
    <input type="color" id="fundo" value="#ffffff">

    <label>Iluminação</label>
    <select id="iluminacao">
      <option value="natural">Natural</option>
      <option value="neon">Neon</option>
      <option value="pôr do sol">Pôr do Sol</option>
      <option value="noturna">Noturna</option>
    </select>

    <label>Textura</label>
    <select id="textura">
      <option value="suave">Suave</option>
      <option value="áspera">Áspera</option>
      <option value="metálica">Metálica</option>
      <option value="aveludada">Aveludada</option>
    </select>

    <label>Resolução</label>
    <select id="resolucao">
      <option value="1024x1024">1024x1024</option>
      <option value="1920x1080">1920x1080</option>
      <option value="3840x2160">4K (3840x2160)</option>
    </select>

    <label>Texto Opcional</label>
    <textarea id="texto" placeholder="Texto na imagem (opcional)"></textarea>

    <button onclick="gerarImagem()">🎨 Gerar Imagem</button>
  </div>

  <div class="preview">
    <h3>Preview</h3>
    <img id="imagem" src="" alt="Imagem Gerada" style="display:none;">
    <div class="share-buttons" style="display:none;">
      <button onclick="compartilhar('facebook')">Facebook</button>
      <button onclick="compartilhar('twitter')">Twitter</button>
      <button onclick="compartilhar('whatsapp')">WhatsApp</button>
    </div>
    <a id="download" style="display:none;" download="wallpaper.png">⬇️ Download</a>
  </div>
</div>

<div class="history">
  <h3>Histórico</h3>
  <div id="historico"></div>
</div>

<script>
  const historico = [];

  function gerarPrompt() {
    const estilo = document.getElementById('estilo').value;
    const tema = document.getElementById('tema').value;
    const elementos = document.getElementById('elementos').value;
    const cores = document.getElementById('cores').value;
    const tom = document.getElementById('tom').value;
    const fundo = document.getElementById('fundo').value;
    const iluminacao = document.getElementById('iluminacao').value;
    const textura = document.getElementById('textura').value;
    const resolucao = document.getElementById('resolucao').value;
    const texto = document.getElementById('texto').value;

    return `Estilo ${estilo}, tema ${tema}, elementos ${elementos}, cores ${cores}, tom ${tom}, fundo ${fundo}, iluminação ${iluminacao}, textura ${textura}, ${texto ? 'texto: ' + texto : ''}`;
  }

  async function gerarImagem() {
    const prompt = gerarPrompt();
    const resolucao = document.getElementById('resolucao').value.split('x');
    const width = parseInt(resolucao[0]);
    const height = parseInt(resolucao[1]);

    const response = await fetch('https://api.stability.ai/v2beta/stable-image/generate/core', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer SUA_API_KEY_AQUI',
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        prompt: prompt,
        output_format: "png",
        model: "stable-diffusion-xl-v1-0",
        width: width,
        height: height
      })
    });

    if (!response.ok) {
      alert("Erro ao gerar a imagem");
      return;
    }

    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    
    const img = document.getElementById('imagem');
    img.src = url;
    img.style.display = 'block';

    document.getElementById('download').href = url;
    document.getElementById('download').style.display = 'inline';

    document.querySelector('.share-buttons').style.display = 'block';

    adicionarHistorico(url);
  }

  function adicionarHistorico(url) {
    historico.unshift(url);
    const historicoDiv = document.getElementById('historico');
    historicoDiv.innerHTML = '';
    historico.forEach(src => {
      const img = document.createElement('img');
      img.src = src;
      img.onclick = () => { document.getElementById('imagem').src = src; };
      historicoDiv.appendChild(img);
    });
  }

  function compartilhar(rede) {
    const url = document.getElementById('imagem').src;
    let shareUrl = '';
    if (rede === 'facebook') {
      shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
    } else if (rede === 'twitter') {
      shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}`;
    } else if (rede === 'whatsapp') {
      shareUrl = `https://wa.me/?text=${encodeURIComponent(url)}`;
    }
    window.open(shareUrl, '_blank');
  }
</script>

</body>
</html>
